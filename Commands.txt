# Create a virtual environment (originally built with python 3.10.11)
python -m venv .venv

# Activate virtual environment
.\.venv\Scripts\Activate

# Update requirements file
pip freeze > requirements.txt

# Install dependencies
pip install -r requirements.txt

# Package AI Deck Generator For Anki
  pyinstaller --clean --onedir --windowed --name "AI Deck Generator For Anki" --icon icons/icon.png `
  --add-data "settings.py;." `
  --add-data "icons;icons" `
  --add-data "anki_style.txt;." `
  --add-data "prompt.txt;." `
  --add-data "services;services" `
  --add-data "README.md;." `
  --add-data "keys.py;." `
  --add-data "TERMS_AND_CONDITIONS.txt;." `
  --add-data "version.py;." `
  main.py


# ------------------ Mac OS --------------------- #

# Create a virtual environment (originally built with python 3.10.11)
python -m venv .venv

#
source .venv/bin/activate

# Install dependencies
pip install -r requirements.txt

# Package
pyinstaller --clean --onedir --windowed \
  --name "AI Deck Generator For Anki" \
  --icon icons/icon.png \
  --add-data "settings.py:." \
  --add-data "icons:icons" \
  --add-data "anki_style.txt:." \
  --add-data "prompt.txt:." \
  --add-data "services:services" \
  --add-data "README.md:." \
  --add-data "keys.py:." \
  --add-data "TERMS_AND_CONDITIONS.txt:." \
  --add-data "version.py:." \
  main.py

# NOTE
# Make sure to move application into /Applications folder, and remove .app file from quarantine

# Remove voicevox_engine from quarantine
xattr -r -d com.apple.quarantine ~/PATH_TO_DIR/voicevox_engine
